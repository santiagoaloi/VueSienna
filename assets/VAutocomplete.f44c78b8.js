import{m as J,f as R,V as X}from"./VTextField.14346083.js";import{m as me,u as Z,V as q,a as z}from"./VList.622cbc6f.js";import{W as ee,r as le,ac as te,k as ne}from"./index.50ee5b3c.js";import{p as ae,I as pe,k as ue,a7 as oe,L as se,s as B,y as H,u as ie,ad as he}from"./vuetify.963a462a.js";import{a as ye,V as re}from"./VMenu.f6a60ef8.js";import{V as ce}from"./VCheckboxBtn.c60b8ad0.js";import{r as O,h as T,L as a,F as Q,M as P,Y as ve,x as ge,w as Y,n as G}from"./vue.05eca872.js";const de=ae({chips:Boolean,closableChips:Boolean,eager:Boolean,hideNoData:Boolean,hideSelected:Boolean,menu:Boolean,menuIcon:{type:pe,default:"$dropdown"},menuProps:{type:Object},multiple:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},openOnClear:Boolean,...me({itemChildren:!1})},"v-select");ue()({name:"VSelect",props:{...de(),...oe(J({modelValue:null}),["validationValue","dirty","appendInnerIcon"]),...ee({transition:{component:ye}})},emits:{"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,v){let{slots:l}=v;const{t:_}=se(),C=O(),u=B(e,"menu"),{items:h,transformIn:p,transformOut:F}=Z(e),d=B(e,"modelValue",[],n=>p(H(n)),n=>{var f;const o=F(n);return e.multiple?o:(f=o[0])!=null?f:null}),I=T(()=>d.value.map(n=>h.value.find(o=>o.value===n.value)||n)),r=T(()=>I.value.map(n=>n.props.value)),c=O();function D(n){d.value=[],e.openOnClear&&(u.value=!0)}function y(){e.hideNoData&&!h.value.length||e.readonly||(u.value=!u.value)}function b(n){if(!e.readonly){if(["Enter","ArrowDown"," "].includes(n.key)&&(n.preventDefault(),u.value=!0),["Escape","Tab"].includes(n.key)&&(u.value=!1),n.key==="ArrowDown"){var o;(o=c.value)==null||o.focus("next")}else if(n.key==="ArrowUp"){var f;n.preventDefault(),(f=c.value)==null||f.focus("prev")}else if(n.key==="Home"){var S;n.preventDefault(),(S=c.value)==null||S.focus("first")}else if(n.key==="End"){var M;n.preventDefault(),(M=c.value)==null||M.focus("last")}}}function V(n){if(e.multiple){const o=r.value.findIndex(f=>f===n.value);if(o===-1)d.value=[...d.value,n];else{const f=[...d.value];f.splice(o,1),d.value=f}}else d.value=[n],u.value=!1}function A(n){var o;(o=c.value)!=null&&o.$el.contains(n.relatedTarget)||(u.value=!1)}function x(n){if(n.relatedTarget==null){var o;(o=C.value)==null||o.focus()}}return ie(()=>{const n=!!(e.chips||l.chip),[o]=R(e);return a(X,P({ref:C},o,{modelValue:d.value.map(f=>f.props.value).join(", "),"onUpdate:modelValue":f=>{f==null&&(d.value=[])},validationValue:d.externalValue,dirty:d.value.length>0,class:["v-select",{"v-select--active-menu":u.value,"v-select--chips":!!e.chips,[`v-select--${e.multiple?"multiple":"single"}`]:!0,"v-select--selected":d.value.length}],appendInnerIcon:e.menuIcon,readonly:!0,"onClick:clear":D,"onClick:control":y,onBlur:A,onKeydown:b}),{...l,default:()=>{var f,S,M;return a(Q,null,[a(re,P({modelValue:u.value,"onUpdate:modelValue":m=>u.value=m,activator:"parent",contentClass:"v-select__content",eager:e.eager,openOnClick:!1,closeOnContentClick:!1,transition:e.transition},e.menuProps),{default:()=>[a(q,{ref:c,selected:r.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:m=>m.preventDefault(),onFocusout:x},{default:()=>{var m;return[!h.value.length&&!e.hideNoData&&((m=(f=l["no-data"])==null?void 0:f.call(l))!=null?m:a(z,{title:_(e.noDataText)},null)),(S=l["prepend-item"])==null?void 0:S.call(l),h.value.map((g,t)=>{var i;var s;return(i=(s=l.item)==null?void 0:s.call(l,{item:g,index:t,props:P(g.props,{onClick:()=>V(g)})}))!=null?i:a(z,P({key:t},g.props,{onClick:()=>V(g)}),{prepend:j=>{let{isSelected:E}=j;return e.multiple&&!e.hideSelected?a(ce,{modelValue:E,ripple:!1},null):void 0}})}),(M=l["append-item"])==null?void 0:M.call(l)]}})]}),I.value.map((m,g)=>{function t(i){i.stopPropagation(),i.preventDefault(),V(m)}const s={"onClick:close":t,modelValue:!0,"onUpdate:modelValue":void 0};return a("div",{key:m.value,class:"v-select__selection"},[n?a(le,{defaults:{VChip:{closable:e.closableChips,size:"small",text:m.title}}},{default:()=>[l.chip?l.chip({item:m,index:g,props:s}):a(te,s,null)]}):l.selection?l.selection({item:m,index:g}):a("span",{class:"v-select__selection-text"},[m.title,e.multiple&&g<I.value.length-1&&a("span",{class:"v-select__selection-comma"},[ve(",")])])])})])}})}),ne({menu:u,select:V},C)}});const ke=(e,v,l)=>e==null||v==null?-1:e.toString().toLocaleLowerCase().indexOf(v.toString().toLocaleLowerCase()),Ve=ae({customFilter:Function,customKeyFilter:Object,filterKeys:[Array,String],filterMode:{type:String,default:"intersection"},noFilter:Boolean},"filter");function Ce(e,v,l){var F,d;const _=[],C=(F=l==null?void 0:l.default)!=null?F:ke,u=l!=null&&l.filterKeys?H(l.filterKeys):!1,h=Object.keys((d=l==null?void 0:l.customKeyFilter)!=null?d:{}).length;if(!(e!=null&&e.length))return _;e:for(let I=0;I<e.length;I++){const r=e[I],c={},D={};let y=-1;if(v&&!(l!=null&&l.noFilter)){if(typeof r=="object"){const A=u||Object.keys(r);for(const x of A){var p;const n=he(r,x,r),o=l==null||(p=l.customKeyFilter)==null?void 0:p[x];if(y=o?o(n,v,r):C(n,v,r),y!==-1&&y!==!1)o?c[x]=y:D[x]=y;else if((l==null?void 0:l.filterMode)==="every")continue e}}else y=C(r,v,r),y!==-1&&y!==!1&&(D.title=y);const b=Object.keys(D).length,V=Object.keys(c).length;if(!b&&!V||(l==null?void 0:l.filterMode)==="union"&&V!==h&&!b||(l==null?void 0:l.filterMode)==="intersection"&&(V!==h||!b))continue}_.push({index:I,matches:{...D,...c}})}return _}function Fe(e,v,l){const _=T(()=>typeof(l==null?void 0:l.value)!="string"&&typeof(l==null?void 0:l.value)!="number"?"":String(l.value));return{filteredItems:T(()=>{const u=ge(v);return Ce(u,_.value,{customKeyFilter:e.customKeyFilter,default:e.customFilter,filterKeys:e.filterKeys,filterMode:e.filterMode,noFilter:e.noFilter}).map(p=>{let{index:F,matches:d}=p;return{item:u[F],matches:d}})})}}function Ie(e,v,l){if(Array.isArray(v))throw new Error("Multiple matches is not implemented");return typeof v=="number"&&~v?a(Q,null,[a("span",{class:"v-autocomplete__unmask"},[e.substr(0,v)]),a("span",{class:"v-autocomplete__mask"},[e.substr(v,l)]),a("span",{class:"v-autocomplete__unmask"},[e.substr(v+l)])]):e}const Me=ue()({name:"VAutocomplete",props:{search:String,...Ve({filterKeys:["title"]}),...de(),...oe(J({modelValue:null}),["validationValue","dirty","appendInnerIcon"]),...ee({transition:!1})},emits:{"update:search":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,v){let{slots:l}=v;const{t:_}=se(),C=O(),u=O(!1),h=O(!0),p=B(e,"menu"),{items:F,transformIn:d,transformOut:I}=Z(e),r=B(e,"search",""),c=B(e,"modelValue",[],t=>d(H(t)),t=>{var i;const s=I(t);return e.multiple?s:(i=s[0])!=null?i:null}),{filteredItems:D}=Fe(e,F,T(()=>h.value?void 0:r.value)),y=T(()=>c.value.map(t=>F.value.find(s=>s.value===t.value)||t)),b=T(()=>y.value.map(t=>t.props.value)),V=O();function A(t){c.value=[],e.openOnClear&&(p.value=!0),r.value=""}function x(){e.hideNoData&&!F.value.length||e.readonly||(p.value=!0)}function n(t){if(!e.readonly){if(["Enter","ArrowDown"].includes(t.key)&&(p.value=!0),["Escape"].includes(t.key)&&(p.value=!1),["Enter","Escape","Tab"].includes(t.key)&&(h.value=!0),t.key==="ArrowDown"){var s;t.preventDefault(),(s=V.value)==null||s.focus("next")}else if(t.key==="ArrowUp"){var i;t.preventDefault(),(i=V.value)==null||i.focus("prev")}}}function o(t){r.value=t.target.value}function f(){u.value&&(h.value=!0)}function S(t){u.value=!0}function M(t){if(t.relatedTarget==null){var s;(s=C.value)==null||s.focus()}}const m=O(!1);function g(t){if(e.multiple){const s=b.value.findIndex(i=>i===t.value);if(s===-1)c.value=[...c.value,t],r.value="";else{const i=[...c.value];i.splice(s,1),c.value=i}}else c.value=[t],m.value=!0,l.selection||(r.value=t.title),p.value=!1,h.value=!0,G(()=>m.value=!1)}return Y(u,t=>{var i;if(t){var s;m.value=!0,r.value=e.multiple||!!l.selection?"":String((i=(s=y.value.at(-1))==null?void 0:s.props.title)!=null?i:""),h.value=!0,G(()=>m.value=!1)}else p.value=!1,r.value=""}),Y(r,t=>{!u.value||m.value||(t&&(p.value=!0),h.value=!t)}),ie(()=>{const t=!!(e.chips||l.chip),[s]=R(e);return a(X,P({ref:C},s,{modelValue:r.value,"onUpdate:modelValue":i=>{i==null&&(c.value=[])},validationValue:c.externalValue,dirty:c.value.length>0,onInput:o,class:["v-autocomplete",{"v-autocomplete--active-menu":p.value,"v-autocomplete--chips":!!e.chips,[`v-autocomplete--${e.multiple?"multiple":"single"}`]:!0,"v-autocomplete--selection-slot":!!l.selection}],appendInnerIcon:e.menuIcon,readonly:e.readonly,"onClick:clear":A,"onClick:control":x,"onClick:input":x,onFocus:()=>u.value=!0,onBlur:()=>u.value=!1,onKeydown:n}),{...l,default:()=>{var i,j,E;return a(Q,null,[a(re,P({modelValue:p.value,"onUpdate:modelValue":k=>p.value=k,activator:"parent",contentClass:"v-autocomplete__content",eager:e.eager,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterLeave:f},e.menuProps),{default:()=>[a(q,{ref:V,selected:b.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:k=>k.preventDefault(),onFocusin:S,onFocusout:M},{default:()=>{var k;return[!D.value.length&&!e.hideNoData&&((k=(i=l["no-data"])==null?void 0:i.call(l))!=null?k:a(z,{title:_(e.noDataText)},null)),(j=l["prepend-item"])==null?void 0:j.call(l),D.value.map((K,U)=>{var W;var L;let{item:w,matches:fe}=K;return(W=(L=l.item)==null?void 0:L.call(l,{item:w,index:U,props:P(w.props,{onClick:()=>g(w)})}))!=null?W:a(z,P({key:U},w.props,{onClick:()=>g(w)}),{prepend:N=>{let{isSelected:$}=N;return e.multiple&&!e.hideSelected?a(ce,{modelValue:$,ripple:!1},null):void 0},title:()=>{var $;var N;return h.value?w.title:Ie(w.title,fe.title,($=(N=r.value)==null?void 0:N.length)!=null?$:0)}})}),(E=l["append-item"])==null?void 0:E.call(l)]}})]}),y.value.map((k,K)=>{function U(w){w.stopPropagation(),w.preventDefault(),g(k)}const L={"onClick:close":U,modelValue:!0,"onUpdate:modelValue":void 0};return a("div",{key:k.value,class:"v-autocomplete__selection"},[t?a(le,{defaults:{VChip:{closable:e.closableChips,size:"small",text:k.title}}},{default:()=>[l.chip?l.chip({item:k,index:K,props:L}):a(te,L,null)]}):l.selection?l.selection({item:k,index:K}):a("span",{class:"v-autocomplete__selection-text"},[k.title,e.multiple&&K<y.value.length-1&&a("span",{class:"v-autocomplete__selection-comma"},[ve(",")])])])})])}})}),ne({isFocused:u,isPristine:h,menu:p,search:r,filteredItems:D,select:g},C)}});export{Me as V};

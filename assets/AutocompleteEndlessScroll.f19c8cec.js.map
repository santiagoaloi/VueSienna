{"version":3,"file":"AutocompleteEndlessScroll.f19c8cec.js","sources":["../../src/pages/playground/projects/autocomplete-endless-scroll/AutocompleteEndlessScroll.vue"],"sourcesContent":["<template>\r\n  <VCard color=\"transparent\" flat class=\"d-flex flex-column fill-height\">\r\n    <VCardActions>\r\n      <VRow density=\"compact\" dense>\r\n        <VCol cols=\"8\">\r\n          <VAutocomplete\r\n            v-model:search=\"search\"\r\n            :items=\"filteredItems\"\r\n            item-title=\"name\"\r\n            filled\r\n            cache-items\r\n            :menu-props=\"{\r\n              maxHeight: 200,\r\n            }\"\r\n          >\r\n            <template v-slot:append-item>\r\n              <div class=\"text-teal pa-4\" v-intersect=\"onIntersect\">\r\n                Loading...\r\n              </div>\r\n            </template>\r\n          </VAutocomplete>\r\n        </VCol>\r\n      </VRow>\r\n    </VCardActions>\r\n  </VCard>\r\n</template>\r\n\r\n<script setup>\r\nlet items = reactive([\r\n  { id: 1, name: 'Harry', lastName: 'Potter', itemProps: { disabled: true } },\r\n  { id: 2, name: 'Ron', lastName: 'Weasley', itemProps: { disabled: false } },\r\n  { id: 3, name: 'Ginny', lastName: 'Weasley', itemProps: { disabled: false } },\r\n\r\n  {\r\n    id: 4,\r\n    name: 'Lord',\r\n    lastName: 'Voldemort',\r\n    itemProps: { disabled: false },\r\n  },\r\n  {\r\n    id: 5,\r\n    name: 'Severus',\r\n    lastName: 'Snape',\r\n    itemProps: { disabled: false },\r\n  },\r\n  {\r\n    id: 6,\r\n    name: 'Albus',\r\n    lastName: 'Dumbledore',\r\n    itemProps: { disabled: false },\r\n  },\r\n])\r\n\r\n// Autocomplete infinite scroll logic.\r\n\r\nlet search = $ref('')\r\n\r\n// Define batch stepper number.\r\nlet batchScrollStepper = $ref(2)\r\n\r\n//Next branch to iterate\r\nlet nextBatch = $ref(null)\r\n\r\n// Current batch size, default is batchScrollStepper value.\r\nlet currentBatchStep = $ref(batchScrollStepper)\r\n\r\n// Calculate max batches available.\r\nlet maxIterableBatches = $computed(() =>\r\n  Math.ceil(totalItems / batchScrollStepper)\r\n)\r\n\r\n// Indicates if the last batch has been loaded.\r\nlet lastBatchReached = $computed(\r\n  () => maxIterableBatches.length >= currentBatchStep\r\n)\r\n\r\n// Total items\r\nlet totalItems = $computed(() => items.length)\r\n\r\n// Indicates if we are still on the first default batch step.\r\nlet isFirstBatch = $computed(() => batchScrollStepper === currentBatchStep)\r\n\r\nfunction resetCurrentBatchStep() {\r\n  currentBatchStep = batchScrollStepper\r\n}\r\n\r\nfunction onIntersect() {\r\n  if (isFirstBatch || lastBatchReached) return\r\n\r\n  currentBatchStep += batchScrollStepper\r\n  nextBatch = currentBatchStep + batchScrollStepper\r\n\r\n  return items.slice(0, nextBatch)\r\n}\r\n\r\n// Search item names or fallback to currentBatchStep.\r\nlet filteredItems = $computed(() => {\r\n  let found = items.filter(item =>\r\n    item.name.toString().toLowerCase().includes(search.toLowerCase())\r\n  )\r\n\r\n  return found.slice(0, currentBatchStep)\r\n})\r\n\r\nwatch(\r\n  () => search,\r\n  (newValue, oldValue) => {\r\n    if (!newValue && oldValue) resetCurrentBatchStep()\r\n  }\r\n)\r\n</script>\r\n<route lang=\"yaml\">\r\nmeta:\r\n  title: Autocomplete - lazy loading scroll\r\n  description: Lazy loading concept.\r\n  icon: '$mdiFormDropdown'\r\n</route>\r\n"],"names":["items","reactive","search","_ref","batchScrollStepper","nextBatch","currentBatchStep","maxIterableBatches","_computed","totalItems","lastBatchReached","isFirstBatch","resetCurrentBatchStep","onIntersect","filteredItems","item","watch","newValue","oldValue"],"mappings":"+hBA4BA,IAAAA,EAAAC,EAAA,CACA,CAAA,GAAA,EAAA,KAAA,QAAA,SAAA,SAAA,UAAA,CAAA,SAAA,GAAA,EACA,CAAA,GAAA,EAAA,KAAA,MAAA,SAAA,UAAA,UAAA,CAAA,SAAA,GAAA,EACA,CAAA,GAAA,EAAA,KAAA,QAAA,SAAA,UAAA,UAAA,CAAA,SAAA,GAAA,EAEA,CACA,GAAA,EACA,KAAA,OACA,SAAA,YACA,UAAA,CAAA,SAAA,EAAA,CACA,EACA,CACA,GAAA,EACA,KAAA,UACA,SAAA,QACA,UAAA,CAAA,SAAA,EAAA,CACA,EACA,CACA,GAAA,EACA,KAAA,QACA,SAAA,aACA,UAAA,CAAA,SAAA,EAAA,CACA,CACA,CAAA,EAIAC,EAAAC,EAAA,EAAA,EAGAC,EAAAD,EAAA,CAAA,EAGAE,EAAAF,EAAA,IAAA,EAGAG,EAAAH,EAAAC,EAAA,KAAA,EAGAG,EAAAC,EAAA,IACA,KAAA,KAAAC,EAAA,MAAAL,EAAA,KAAA,CACA,EAGAM,EAAAF,EACA,IAAAD,EAAA,MAAA,QAAAD,EAAA,KACA,EAGAG,EAAAD,EAAA,IAAAR,EAAA,MAAA,EAGAW,EAAAH,EAAA,IAAAJ,EAAA,QAAAE,EAAA,KAAA,EAEA,SAAAM,GAAA,CACAN,EAAA,MAAAF,EAAA,KACA,CAEA,SAAAS,GAAA,CACA,GAAA,EAAAF,EAAA,OAAAD,EAAA,OAEA,OAAAJ,EAAA,OAAAF,EAAA,MACAC,EAAA,MAAAC,EAAA,MAAAF,EAAA,MAEAJ,EAAA,MAAA,EAAAK,EAAA,KAAA,CACA,CAGA,IAAAS,EAAAN,EAAA,IACAR,EAAA,OAAAe,GACAA,EAAA,KAAA,SAAA,EAAA,YAAA,EAAA,SAAAb,EAAA,MAAA,aAAA,CACA,EAEA,MAAA,EAAAI,EAAA,KAAA,CACA,EAEA,OAAAU,EACA,IAAAd,EAAA,MACA,CAAAe,EAAAC,IAAA,CACA,CAAAD,GAAAC,GAAAN,EAAA,CACA,CACA"}
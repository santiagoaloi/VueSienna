{"version":3,"file":"AutocompleteEndlessScroll.bcaf0b04.js","sources":["../../src/pages/playground/projects/autocomplete-endless-scroll/AutocompleteEndlessScroll.vue"],"sourcesContent":["<template>\n  <VCard color=\"transparent\" flat class=\"d-flex flex-column fill-height\">\n    <VCardActions>\n      <VRow density=\"compact\" dense>\n        <VCol cols=\"8\">\n          <VAutocomplete\n            v-model:search=\"search\"\n            :items=\"filteredItems\"\n            item-title=\"name\"\n            filled\n            cache-items\n            :menu-props=\"{\n              maxHeight: 200,\n            }\"\n          >\n            <template v-slot:append-item>\n              <div class=\"text-teal pa-4\" v-intersect=\"onIntersect\">\n                Loading...\n              </div>\n            </template>\n          </VAutocomplete>\n        </VCol>\n      </VRow>\n    </VCardActions>\n  </VCard>\n</template>\n\n<script setup>\nlet items = reactive([\n  { id: 1, name: 'Harry', lastName: 'Potter', itemProps: { disabled: true } },\n  { id: 2, name: 'Ron', lastName: 'Weasley', itemProps: { disabled: false } },\n  { id: 3, name: 'Ginny', lastName: 'Weasley', itemProps: { disabled: false } },\n\n  {\n    id: 4,\n    name: 'Lord',\n    lastName: 'Voldemort',\n    itemProps: { disabled: false },\n  },\n  {\n    id: 5,\n    name: 'Severus',\n    lastName: 'Snape',\n    itemProps: { disabled: false },\n  },\n  {\n    id: 6,\n    name: 'Albus',\n    lastName: 'Dumbledore',\n    itemProps: { disabled: false },\n  },\n])\n\n// Autocomplete infinite scroll logic.\n\nlet search = $ref('')\n\n// Define batch stepper number.\nlet batchScrollStepper = $ref(2)\n\n//Next branch to iterate\nlet nextBatch = $ref(null)\n\n// Current batch size, default is batchScrollStepper value.\nlet currentBatchStep = $ref(batchScrollStepper)\n\n// Calculate max batches available.\nlet maxIterableBatches = $computed(() =>\n  Math.ceil(totalItems / batchScrollStepper)\n)\n\n// Indicates if the last batch has been loaded.\nlet lastBatchReached = $computed(\n  () => maxIterableBatches.length >= currentBatchStep\n)\n\n// Total items\nlet totalItems = $computed(() => items.length)\n\n// Indicates if we are still on the first default batch step.\nlet isFirstBatch = $computed(() => batchScrollStepper === currentBatchStep)\n\nfunction resetCurrentBatchStep() {\n  currentBatchStep = batchScrollStepper\n}\n\nfunction onIntersect() {\n  if (isFirstBatch || lastBatchReached) return\n\n  currentBatchStep += batchScrollStepper\n  nextBatch = currentBatchStep + batchScrollStepper\n\n  return items.slice(0, nextBatch)\n}\n\n// Search item names or fallback to currentBatchStep.\nlet filteredItems = $computed(() => {\n  let found = items.filter(item =>\n    item.name.toString().toLowerCase().includes(search.toLowerCase())\n  )\n\n  return found.slice(0, currentBatchStep)\n})\n\nwatch(\n  () => search,\n  (newValue, oldValue) => {\n    if (!newValue && oldValue) resetCurrentBatchStep()\n  }\n)\n</script>\n<route lang=\"yaml\">\nmeta:\n  title: Autocomplete - lazy loading scroll\n  description: Lazy loading concept.\n  icon: '$mdiFormDropdown'\n</route>\n"],"names":["items","reactive","search","_ref","batchScrollStepper","nextBatch","currentBatchStep","maxIterableBatches","_computed","totalItems","lastBatchReached","isFirstBatch","resetCurrentBatchStep","onIntersect","filteredItems","item","watch","newValue","oldValue"],"mappings":"+hBA4BA,IAAAA,EAAAC,EAAA,CACA,CAAA,GAAA,EAAA,KAAA,QAAA,SAAA,SAAA,UAAA,CAAA,SAAA,GAAA,EACA,CAAA,GAAA,EAAA,KAAA,MAAA,SAAA,UAAA,UAAA,CAAA,SAAA,GAAA,EACA,CAAA,GAAA,EAAA,KAAA,QAAA,SAAA,UAAA,UAAA,CAAA,SAAA,GAAA,EAEA,CACA,GAAA,EACA,KAAA,OACA,SAAA,YACA,UAAA,CAAA,SAAA,EAAA,CACA,EACA,CACA,GAAA,EACA,KAAA,UACA,SAAA,QACA,UAAA,CAAA,SAAA,EAAA,CACA,EACA,CACA,GAAA,EACA,KAAA,QACA,SAAA,aACA,UAAA,CAAA,SAAA,EAAA,CACA,CACA,CAAA,EAIAC,EAAAC,EAAA,EAAA,EAGAC,EAAAD,EAAA,CAAA,EAGAE,EAAAF,EAAA,IAAA,EAGAG,EAAAH,EAAAC,EAAA,KAAA,EAGAG,EAAAC,EAAA,IACA,KAAA,KAAAC,EAAA,MAAAL,EAAA,KAAA,CACA,EAGAM,EAAAF,EACA,IAAAD,EAAA,MAAA,QAAAD,EAAA,KACA,EAGAG,EAAAD,EAAA,IAAAR,EAAA,MAAA,EAGAW,EAAAH,EAAA,IAAAJ,EAAA,QAAAE,EAAA,KAAA,EAEA,SAAAM,GAAA,CACAN,EAAA,MAAAF,EAAA,KACA,CAEA,SAAAS,GAAA,CACA,GAAA,EAAAF,EAAA,OAAAD,EAAA,OAEA,OAAAJ,EAAA,OAAAF,EAAA,MACAC,EAAA,MAAAC,EAAA,MAAAF,EAAA,MAEAJ,EAAA,MAAA,EAAAK,EAAA,KAAA,CACA,CAGA,IAAAS,EAAAN,EAAA,IACAR,EAAA,OAAAe,GACAA,EAAA,KAAA,SAAA,EAAA,YAAA,EAAA,SAAAb,EAAA,MAAA,aAAA,CACA,EAEA,MAAA,EAAAI,EAAA,KAAA,CACA,EAEA,OAAAU,EACA,IAAAd,EAAA,MACA,CAAAe,EAAAC,IAAA,CACA,CAAAD,GAAAC,GAAAN,EAAA,CACA,CACA"}
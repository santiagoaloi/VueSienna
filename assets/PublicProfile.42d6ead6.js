import{Z as re,m as ue,u as se,f as ie,b as ce,k as de,ad as Z,ae as fe,af as me,a as J,V as D,l as ve,a2 as pe}from"./index.50ee5b3c.js";import{c as ge}from"./lodash.clonedeep.42da14fd.js";import{d as xe}from"./pinia.0dc6b6a5.js";import{s as Ve,g as he}from"./firebase-firestore.805c72ca.js";import{F as be,E as _e,a as ye}from"./vee-validate.a5b51701.js";import{h as B,r as V,C as Ce,w as _,E as Pe,L as a,M as C,F as N,R as j,S as Fe,a8 as we,n as X,a as ke,l as y,p as T,q as n,s as Se,u as Ie,x as v,z as Be,X as Re,Y as M}from"./vue.05eca872.js";import{c as R}from"./yup.d80c54de.js";import{a as Ne,b as Te,c as He,d as Ue,V as z}from"./VTextField.14346083.js";import{d as $e,s as qe,u as Ae,P as Ee,aa as ze,b as De,a0 as Me}from"./vuetify.963a462a.js";import{b as Ge,d as Y,V as Le,a as Oe}from"./VCard.19c4f1b6.js";import"./firebase-app.4dc8b612.js";import"./firebase-storage.eb3640cf.js";import"./firebase-functions.f542ccb7.js";import"./firebase-auth.9b217eac.js";import"./vue-chemistry.c335f58a.js";import"./vue-router.cd3f2694.js";import"./gh-pages.f50f052d.js";import"./pinia-plugin-persistedstate.fa7085e9.js";const je=$e({name:"VTextarea",directives:{Intersect:re},inheritAttrs:!1,props:{autoGrow:Boolean,autofocus:Boolean,counter:[Boolean,Number,String],counterValue:Function,hint:String,persistentHint:Boolean,prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,noResize:Boolean,rows:{type:[Number,String],default:5,validator:e=>!isNaN(parseFloat(e))},maxRows:{type:[Number,String],validator:e=>!isNaN(parseFloat(e))},suffix:String,...ue(),...Ne()},emits:{"click:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,s){let{attrs:o,emit:h,slots:r}=s;const l=qe(e,"modelValue"),{isFocused:f,focus:H,blur:P}=se(e),F=B(()=>typeof e.counterValue=="function"?e.counterValue(l.value):(l.value||"").toString().length),u=B(()=>{if(o.maxlength)return o.maxlength;if(!(!e.counter||typeof e.counter!="number"&&typeof e.counter!="string"))return e.counter});function U(t,i){var c,d;!e.autofocus||!t||(c=i[0].target)==null||(d=c.focus)==null||d.call(c)}const w=V(),m=V(),p=V(""),k=V(),G=B(()=>f.value||e.persistentPlaceholder),K=B(()=>e.messages.length?e.messages:G.value||e.persistentHint?e.hint:"");function $(){if(k.value!==document.activeElement){var t;(t=k.value)==null||t.focus()}f.value||H()}function Q(t){$(),h("click:control",t)}function W(t){t.stopPropagation(),$(),X(()=>{l.value="",ze(e["onClick:clear"],t)})}function ee(t){l.value=t.target.value}const g=V();function x(){!e.autoGrow||X(()=>{if(!g.value||!m.value)return;const t=getComputedStyle(g.value),i=getComputedStyle(m.value.$el),c=parseFloat(t.getPropertyValue("--v-field-padding-top"))+parseFloat(t.getPropertyValue("--v-input-padding-top"))+parseFloat(t.getPropertyValue("--v-field-padding-bottom")),d=g.value.scrollHeight,q=parseFloat(t.lineHeight),A=Math.max(parseFloat(e.rows)*q+c,parseFloat(i.getPropertyValue("--v-input-control-height"))),E=parseFloat(e.maxRows)*q+c||1/0;p.value=De(Me(d!=null?d:0,A,E))})}Ce(x),_(l,x),_(()=>e.rows,x),_(()=>e.maxRows,x),_(()=>e.density,x);let S;return _(g,t=>{if(t)S=new ResizeObserver(x),S.observe(g.value);else{var i;(i=S)==null||i.disconnect()}}),Pe(()=>{var t;(t=S)==null||t.disconnect()}),Ae(()=>{const t=!!(r.counter||e.counter||e.counterValue),i=!!(t||r.details),[c,d]=Ee(o),[{modelValue:q,...A}]=ie(e),[E]=Te(e);return a(ce,C({ref:w,modelValue:l.value,"onUpdate:modelValue":b=>l.value=b,class:["v-textarea v-text-field",{"v-textarea--prefixed":e.prefix,"v-textarea--suffixed":e.suffix,"v-text-field--prefixed":e.prefix,"v-text-field--suffixed":e.suffix,"v-textarea--auto-grow":e.autoGrow,"v-textarea--no-resize":e.noResize||e.autoGrow,"v-text-field--flush-details":["plain","underlined"].includes(e.variant)}],"onClick:prepend":e["onClick:prepend"],"onClick:append":e["onClick:append"]},c,A,{focused:f.value,messages:K.value}),{...r,default:b=>{let{isDisabled:I,isDirty:L,isReadonly:te,isValid:ae}=b;return a(He,C({ref:m,style:{"--v-textarea-control-height":p.value},"onClick:control":Q,"onClick:clear":W,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"],role:"textbox"},E,{active:G.value||L.value,dirty:L.value||e.dirty,focused:f.value,error:ae.value===!1}),{...r,default:le=>{let{props:{class:O,...ne}}=le;return a(N,null,[e.prefix&&a("span",{class:"v-text-field__prefix"},[e.prefix]),j(a("textarea",C({ref:k,class:O,value:l.value,onInput:ee,autofocus:e.autofocus,readonly:te.value,disabled:I.value,placeholder:e.placeholder,rows:e.rows,name:e.name,onFocus:$,onBlur:P},ne,d),null),[[Fe("intersect"),{handler:U},null,{once:!0}]]),e.autoGrow&&j(a("textarea",{class:[O,"v-textarea__sizer"],"onUpdate:modelValue":oe=>l.value=oe,ref:g,readonly:!0,"aria-hidden":"true"},null),[[we,l.value]]),e.suffix&&a("span",{class:"v-text-field__suffix"},[e.suffix])])}})},details:i?b=>{var I;return a(N,null,[(I=r.details)==null?void 0:I.call(r,b),t&&a(N,null,[a("span",null,null),a(Ue,{active:e.persistentCounter||f.value,value:F.value,max:u.value},r.counter)])])}:void 0})}),de({},w,m,k)}}),Xe=xe("account",{actions:{async updateProfile(e){try{const s=Z(),o=Ve(fe,"users",s.userId);return await he(o,{...e}),{saved:!0}}catch({...s}){return{saved:!1}}}}}),Ye={__name:"PublicProfileForm",props:{schema:{type:Object,required:!0,default:()=>{}}},setup(e){let s=Z();const o=ke(ge(s.profile));let h=me(),r=Xe(),l=V(!1);async function f(){if(l.value=!0,(await r.updateProfile(o)).saved){l.value=!1,h.snackbar("Successfully updated settings.");return}l.value=!1,h.snackbar("Something went wrong saving","error")}return(H,P)=>(y(),T(v(ye),{onSubmit:P[0]||(P[0]=F=>f())},{default:n(()=>[a(J,null,{default:n(()=>[(y(!0),Se(N,null,Ie(e.schema.fields,({type:F,name:u,label:U,component:w,...m})=>(y(),T(D,{cols:"12",key:u},{default:n(()=>[a(v(be),C({modelValue:v(o)[u],"onUpdate:modelValue":p=>v(o)[u]=p,id:u,name:u},m),{default:n(()=>[(y(),T(Be(w),C({class:"my-1",label:U,type:F,modelValue:v(o)[u],"onUpdate:modelValue":p=>v(o)[u]=p},m),null,16,["label","type","modelValue","onUpdate:modelValue"]))]),_:2},1040,["modelValue","onUpdate:modelValue","id","name"]),Re("small",null,[a(v(_e),{class:"ml-2 position-absolute text-red-lighten-3",name:u},null,8,["name"])])]),_:2},1024))),128)),a(D,{class:"text-end"},{default:n(()=>[a(ve,{loading:l.value,type:"submit",color:"save-button"},{default:n(()=>[M("Update Profile")]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1}))}},mt={__name:"PublicProfile",setup(e){const s={fields:[{label:"Name",name:"name",rules:R().required(),component:z},{label:"Last name",name:"lastName",rules:R().required(),component:z},{label:"Email",name:"email",rules:R().email().required(),component:z,disabled:!0},{label:"Bio",name:"bio",rules:R(),component:je,counter:!0,maxlength:150}]};return(o,h)=>{const r=Ye;return y(),T(pe,{fluid:""},{default:n(()=>[a(J,null,{default:n(()=>[a(D,{cols:"12",md:"6"},{default:n(()=>[a(Ge,{color:"transparent"},{default:n(()=>[a(Y,null,{default:n(()=>[a(Le,null,{default:n(()=>[M("Public Profile")]),_:1}),a(Oe,null,{default:n(()=>[M("Odio euismod lacinia at quis risus sed vulputate odio. Non nisi est sit amet. Egestas integer eget aliquet nibh praesent tristique magna. ")]),_:1}),a(Y,null,{default:n(()=>[a(r,{schema:s})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}};export{mt as default};
